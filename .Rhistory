?spread
?summarize
document
document()
document()
document()
document()
document()
document()
document()
document()
fars_read ("accident_2013.csv.bz2")
document()
document()
document()
document()
document()
document()
document()
document()
document()
document()
?mean
document()
document()
document()
document()
document()
document()
document()
document()
document()
document()
fars_map_state(2,2013)
library(maps)
install.packages("maps")
library(maps)
fars_map_state(2,2013)
library(graphics)
fars_map_state(2,2013)
fars_map_state(4,2013)
fars_map_state(8,2013)
fars_map_state(7,2013)
fars_map_state(15,2013)
fars_map_state(20,2013)
fars_map_state(8,2015)
x11()
fars_map_state(8,2015)
documents()
document()
document()
document()
document()
document()
document()
document()
document()
document()
document()
document()
document()
document()
document()
document()
document()
library(devtools)
use_vignette("function_details")
Accident<- list(2013=fars_read ("accident_2013.csv.bz2"),2014=fars_read("accident_2014.csv.bz2"),2015=fars_read("accident_2015.csv.bz2"))
fars_read <- function(filename) {
if(!file.exists(filename))
stop("file '", filename, "' does not exist")
data <- suppressMessages({
readr::read_csv(filename, progress = FALSE)
})
dplyr::tbl_df(data)
}
knitr::opts_chunk$set(
collapse = TRUE,
comment = "#>"
)
Accident<- list(2013=fars_read ("accident_2013.csv.bz2"),2014=fars_read("accident_2014.csv.bz2"),2015=fars_read("accident_2015.csv.bz2"))
Accident<- list(2013=fars_read("accident_2013.csv.bz2"),2014=fars_read("accident_2014.csv.bz2"),2015=fars_read("accident_2015.csv.bz2"))
j<-lista(x=1,y=2)
j<-list(x=1,y=2)
Accident<-list("2013"=fars_read("accident_2013.csv.bz2"),2014=fars_read("accident_2014.csv.bz2"),2015=fars_read("accident_2015.csv.bz2"))
Accident<-list("2013"=fars_read("accident_2013.csv.bz2"),"2014"=fars_read("accident_2014.csv.bz2"),"2015"=fars_read("accident_2015.csv.bz2"))
view(Accident$2013)
View(Accident)
view(Accident$"2013")
View(Accident$"2013")
Accident$"2013"
Accident$2013
Accident<-list("2013"=fars_read("accident_2013.csv.bz2"),"2014"=fars_read("accident_#2014.csv.bz2"),"2015"=fars_read("accident_2015.csv.bz2"))
head(Accident$"2013")
Accident<-list("2013"=fars_read("accident_2013.csv.bz2"),"2014"=fars_read("accident_2014.csv.bz2"))
head(Accident$"2013")
fars_read_years <- function(years) {
lapply(years, function(year) {
file <- make_filename(year)
tryCatch({
dat <- fars_read(file)
dplyr::mutate(dat, year = year) %>%
dplyr::select(MONTH, year)
}, error = function(e) {
warning("invalid year: ", year)
return(NULL)
})
})
}
make_filename <- function(year) {
year <- as.integer(year)
sprintf("accident_%d.csv.bz2", year)
}
getwd()
make_filename <- function(year) {
year <- as.integer(year)
sprintf("accident_%d.csv.bz2", year)
}
fars_read <- function(filename) {
if(!file.exists(filename))
stop("file '", filename, "' does not exist")
data <- suppressMessages({
readr::read_csv(filename, progress = FALSE)
})
dplyr::tbl_df(data)
}
years<-c(2013,2014)
filenames<- c(make_filename(years[1]),make_filename(years[2]))
Accident<-list("2013"=fars_read(filenames[1]),"2014"=fars_read(filenames[2]))
make_filename <- function(year) {
year <- as.integer(year)
sprintf("accident_%d.csv.bz2", year)
}
fars_read <- function(filename) {
if(!file.exists(filename))
stop("file '", filename, "' does not exist")
data <- suppressMessages({
readr::read_csv(filename, progress = FALSE)
})
dplyr::tbl_df(data)
}
years<-c(2013,2014)
filenames<- c(make_filename(years[1]),make_filename(years[2]))
Accident<-list("2013"=fars_read(filenames[1]),"2014"=fars_read(filenames[2]))
library(knitr)
make_filename <- function(year) {
year <- as.integer(year)
sprintf("accident_%d.csv.bz2", year)
}
fars_read <- function(filename) {
if(!file.exists(filename))
stop("file '", filename, "' does not exist")
data <- suppressMessages({
readr::read_csv(filename, progress = FALSE)
})
dplyr::tbl_df(data)
}
years<-c(2013,2014)
filenames<- c(make_filename(years[1]),make_filename(years[2]))
Accident<-list("2013"=fars_read(filenames[1]),"2014"=fars_read(filenames[2]))
make_filename <- function(year) {
year <- as.integer(year)
sprintf("accident_%d.csv.bz2", year)
}
fars_read <- function(filename) {
if(!file.exists(filename))
stop("file '", filename, "' does not exist")
data <- suppressMessages({
readr::read_csv(filename, progress = FALSE)
})
dplyr::tbl_df(data)
}
years<-c(2013,2014)
filenames<- c(make_filename(years[1]),make_filename(years[2]))
Accident<-list("2013"=fars_read(filenames[1]),"2014"=fars_read(filenames[2]))
make_filename <- function(year) {
year <- as.integer(year)
sprintf("accident_%d.csv.bz2", year)
}
fars_read <- function(filename) {
if(!file.exists(filename))
stop("file '", filename, "' does not exist")
data <- suppressMessages({
readr::read_csv(filename, progress = FALSE)
})
dplyr::tbl_df(data)
}
years<-c(2013,2014)
filenames<- c(make_filename(years[1]),make_filename(years[2]))
Accident<-list("2013"=fars_read(filenames[1]),"2014"=fars_read(filenames[2]))
make_filename <- function(year) {
year <- as.integer(year)
sprintf("accident_%d.csv.bz2", year)
}
fars_read <- function(filename) {
if(!file.exists(filename))
stop("file '", filename, "' does not exist")
data <- suppressMessages({
readr::read_csv(filename, progress = FALSE)
})
dplyr::tbl_df(data)
}
years<-c(2013,2014)
filenames<- c(make_filename(years[1]),make_filename(years[2]))
getwd()
Accident<-list("2013"=fars_read(filenames[1]),"2014"=fars_read(filenames[2]))
system.file("data", "accident_2013.csv.bz2", package = "Activity1")
system.file(" "accident_2013.csv.bz2", package = "Activity1")
system.file("accident_2013.csv.bz2", package = "Activity1")
path.expand("~")
get.wd()
getwd()
knitr::opts_chunk$set(
collapse = TRUE,
comment = "#>"
)
knitr::opts_knit$set(root.dir = getwd())
make_filename <- function(year) {
year <- as.integer(year)
sprintf("accident_%d.csv.bz2", year)
}
fars_read <- function(filename) {
if(!file.exists(filename))
stop("file '", filename, "' does not exist")
data <- suppressMessages({
readr::read_csv(filename, progress = FALSE)
})
dplyr::tbl_df(data)
}
years<-c(2013,2014)
filenames<- c(make_filename(years[1]),make_filename(years[2]))
getwd()
Accident<-list("2013"=fars_read(filenames[1]),"2014"=fars_read(filenames[2]))
dirname()
dirname(getwd())
dirname(getwd())
knitr::opts_chunk$set(
collapse = TRUE,
comment = "#>"
)
knitr::opts_knit$set(root.dir = dirname(getwd()))
years<-c(2013,2014)
filenames<- c(make_filename(years[1]),make_filename(years[2]))
Accident<-list("2013"=fars_read(filenames[1]),"2014"=fars_read(filenames[2]))
Accident$"2013"[1:10,1:10]
years<-c(2013,2014)
records<- fars_read_years(years)
names(records)
years<-c(2013,2014)
getwd()
records<- fars_read_years(years)
library(dplyr)
library(dplyr)
years<-c(2013,2014,2015)
records<-fars_summarize_years(years)
fars_summarize_years <- function(years) {
dat_list <- fars_read_years(years)
dplyr::bind_rows(dat_list) %>%
dplyr::group_by(year, MONTH) %>%
dplyr::summarize(n = n()) %>%
tidyr::spread(year, n)
}
years<-c(2013,2014,2015)
records<-fars_summarize_years(years)
records
years<-c(2013)
records<-fars_read_years(years)
names(records)<-years
records$"2013"[1:10,]
?sample
knitr::opts_chunk$set(
collapse = TRUE,
comment = "#>"
)
knitr::opts_knit$set(root.dir = dirname(getwd()))
id<-base::sample(1:nrows(records$"2013"),10,replace=F)
nrows(records$"2013")
?nrows
knitr::opts_chunk$set(
collapse = TRUE,
comment = "#>"
)
knitr::opts_knit$set(root.dir = dirname(getwd()))
library(dplyr)
library(tidyr)
library(graphics)
make_filename <- function(year) {
year <- as.integer(year)
sprintf("accident_%d.csv.bz2", year)
}
fars_read <- function(filename) {
if(!file.exists(filename))
stop("file '", filename, "' does not exist")
data <- suppressMessages({
readr::read_csv(filename, progress = FALSE)
})
dplyr::tbl_df(data)
}
fars_summarize_years <- function(years) {
dat_list <- fars_read_years(years)
dplyr::bind_rows(dat_list) %>%
dplyr::group_by(year, MONTH) %>%
dplyr::summarize(n = n()) %>%
tidyr::spread(year,n)}
fars_read_years <- function(years) {
lapply(years, function(year) {
file <- make_filename(year)
tryCatch({
dat <- fars_read(file)
dplyr::mutate(dat, year = year) %>%
dplyr::select(MONTH, year)
}, error = function(e) {
warning("invalid year: ", year)
return(NULL)
})
})
}
fars_map_state <- function(state.num, year) {
filename <- make_filename(year)
data <- fars_read(filename)
state.num <- as.integer(state.num)
if(!(state.num %in% unique(data$STATE)))
stop("invalid STATE number: ", state.num)
data.sub <- dplyr::filter(data, STATE == state.num)
if(nrow(data.sub) == 0L) {
message("no accidents to plot")
return(invisible(NULL))
}
is.na(data.sub$LONGITUD) <- data.sub$LONGITUD > 900
is.na(data.sub$LATITUDE) <- data.sub$LATITUDE > 90
with(data.sub, {
maps::map("state", ylim = range(LATITUDE, na.rm = TRUE),
xlim = range(LONGITUD, na.rm = TRUE))
graphics::points(LONGITUD, LATITUDE, pch = 46)
})
}
Accident_2013<-fars_read("accident_2013.csv.bz2")
Accident_2013[1:10,1:10]
years<-c(2013,2014)
filenames<- c(make_filename(years[1]),make_filename(years[2]))
Accident<-list("2013"=fars_read(filenames[1]),"2014"=fars_read(filenames[2]))
Accident$"2013"[1:10,1:10]
years<-c(2013,2014)
records<-fars_read_years(years)
names(records)<-years
id<-base::sample(1:nrow(records$"2013"),10,replace=F)
records$"2013"[id,]
years<-c(2013,2014,2015)
records<-fars_summarize_years(years)
records
state.num<-4
years<-c(2013,2014)
for (year in years){
fars_map_state(state.num,year)
title(paste( "id.state = ",state.num),xlab=paste("Year = ",year))
}
knitr::opts_chunk$set(
collapse = TRUE,
comment = "#>"
)
knitr::opts_knit$set(root.dir = dirname(getwd()))
library(dplyr)
library(tidyr)
library(graphics)
make_filename <- function(year) {
year <- as.integer(year)
sprintf("accident_%d.csv.bz2", year)
}
fars_read <- function(filename) {
if(!file.exists(filename))
stop("file '", filename, "' does not exist")
data <- suppressMessages({
readr::read_csv(filename, progress = FALSE)
})
dplyr::tbl_df(data)
}
fars_summarize_years <- function(years) {
dat_list <- fars_read_years(years)
dplyr::bind_rows(dat_list) %>%
dplyr::group_by(year, MONTH) %>%
dplyr::summarize(n = n()) %>%
tidyr::spread(year,n)}
fars_read_years <- function(years) {
lapply(years, function(year) {
file <- make_filename(year)
tryCatch({
dat <- fars_read(file)
dplyr::mutate(dat, year = year) %>%
dplyr::select(MONTH, year)
}, error = function(e) {
warning("invalid year: ", year)
return(NULL)
})
})
}
fars_map_state <- function(state.num, year) {
filename <- make_filename(year)
data <- fars_read(filename)
state.num <- as.integer(state.num)
if(!(state.num %in% unique(data$STATE)))
stop("invalid STATE number: ", state.num)
data.sub <- dplyr::filter(data, STATE == state.num)
if(nrow(data.sub) == 0L) {
message("no accidents to plot")
return(invisible(NULL))
}
is.na(data.sub$LONGITUD) <- data.sub$LONGITUD > 900
is.na(data.sub$LATITUDE) <- data.sub$LATITUDE > 90
with(data.sub, {
maps::map("state", ylim = range(LATITUDE, na.rm = TRUE),
xlim = range(LONGITUD, na.rm = TRUE))
graphics::points(LONGITUD, LATITUDE, pch = 46)
})
}
Accident_2013<-fars_read("accident_2013.csv.bz2")
Accident_2013[1:10,1:10]
years<-c(2013,2014)
filenames<- c(make_filename(years[1]),make_filename(years[2]))
Accident<-list("2013"=fars_read(filenames[1]),"2014"=fars_read(filenames[2]))
Accident$"2013"[1:10,1:10]
years<-c(2013,2014)
records<-fars_read_years(years)
names(records)<-years
id<-base::sample(1:nrow(records$"2013"),10,replace=F)
records$"2013"[id,]
years<-c(2013,2014,2015)
records<-fars_summarize_years(years)
records
state.num<-4
years<-c(2013,2014)
for (year in years){
fars_map_state(state.num,year)
title(paste( "id.state = ",state.num),xlab=paste("Year = ",year))
}
libraary(testthat)
library(testthat)
library(testthat)
expect_that(sqrt(3) * sqrt(3), is_identical_to(3))
expect_that(sqrt(3) * sqrt(3), is_identical_to(9))
?test_file()
?test_dir()
system.file("extdata", "accident_2013.csv.bz2", package = "Activity1")
expect_that(filename,matches("accident_2013.csv.bz2"))
filename<-make_filename(2013)
expect_that(filename,matches("accident_2013.csv.bz2"))
make_filename <- function(year) {
year <- as.integer(year)
sprintf("accident_%d.csv.bz2", year)
}
filename<-make_filename(2013)
expect_that(filename,matches("accident_2013.csv.bz2"))
expect_equal(filename,"accident_2013.csv.bz2")
test<-expect_equal(filename,"accident_2013.csv.bz2")
test
expect_equal(filename,"accident_2014.csv.bz2")
fars_read_years <- function(years) {
lapply(years, function(year) {
file <- make_filename(year)
tryCatch({
dat <- fars_read(file)
dplyr::mutate(dat, year = year) %>%
dplyr::select(MONTH, year)
}, error = function(e) {
warning("invalid year: ", year)
return(NULL)
})
})
}
2014
expect_that(fars_read_years(c(2013,2014,2015)),is_a(list))
fars_read_years(c(2013,2014,2015))
system.file("extdata", filename, package = "Activity1")
fars_read_years(c(2016,2017))
expect_that(fars_read_years(c(2016,2017)),gives_warning())
a<-"tr"
class(a)
testthat("Activity1",{
filename<-make_filename(2013)
expect_that(filename,is_a("character"))
expect_equal(filename,"accident_2013.csv.bz2") #Testing accurate filename for 2013 year
expect_that(fars_read_years(c(2016,2017)),gives_warning())
}
)
test_that("Activity1",{
filename<-make_filename(2013)
expect_that(filename,is_a("character"))
expect_equal(filename,"accident_2013.csv.bz2") #Testing accurate filename for 2013 year
expect_that(fars_read_years(c(2016,2017)),gives_warning())
}
)
library(maps)
library(readr)
library(tidyr)
library(roxygen2)
library(devtools)
devtools::document()
devtools::install_deps(dependencies = TRUE).
devtools::install_deps(dependencies = TRUE)
document()
load_all
document()
load_all
document()
document()
load_all
library(testthat)
load_all
document()
load_all
document()
document()
load_all
